<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>GitHub Exam — Premium Edition</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
  :root {
    --primary: #24292e;
    --primary-light: #2f363d;
    --secondary: #f6f8fa;
    --accent: #0969da;
    --accent-hover: #0550ae;
    --success: #1a7f37;
    --success-light: #dafbe1;
    --danger: #cf222e;
    --danger-light: #ffebe9;
    --warning: #d4a72c;
    --warning-light: #fff8c5;
    --text: #1f2328;
    --text-light: #656d76;
    --text-lighter: #8c959f;
    --border: #d0d7de;
    --border-light: #eaeef2;
    --card-bg: #ffffff;
    --shadow: 0 1px 3px rgba(27, 31, 36, 0.12);
    --shadow-lg: 0 8px 24px rgba(140, 149, 159, 0.2);
    --radius: 6px;
    --radius-lg: 12px;
  }

  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
  }

  body {
    background-color: var(--secondary);
    color: var(--text);
    line-height: 1.5;
    padding: 0;
  }

  .container {
    max-width: 980px;
    margin: 0 auto;
    padding: 0 20px;
  }

  /* Header */
  header {
    background-color: var(--primary);
    color: white;
    padding: 16px 0;
    box-shadow: var(--shadow);
    margin-bottom: 24px;
  }

  .header-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .logo {
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .logo i {
    font-size: 24px;
  }

  .logo h1 {
    font-size: 20px;
    font-weight: 600;
  }

  .header-meta {
    display: flex;
    gap: 20px;
    align-items: center;
  }

  .meta-item {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 14px;
    color: #e6edf3;
  }

  /* Exam Info */
  .exam-info {
    background-color: var(--card-bg);
    border-radius: var(--radius-lg);
    padding: 20px;
    box-shadow: var(--shadow);
    border: 1px solid var(--border-light);
    margin-bottom: 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .exam-info h2 {
    font-size: 18px;
    margin-bottom: 4px;
    color: var(--primary);
  }

  .exam-info p {
    font-size: 14px;
    color: var(--text-light);
  }

  .exam-stats {
    display: flex;
    gap: 24px;
  }

  .stat {
    text-align: center;
  }

  .stat-value {
    font-size: 24px;
    font-weight: 700;
    margin-bottom: 4px;
  }

  .stat-label {
    font-size: 12px;
    color: var(--text-light);
  }

  /* Questions */
  .card {
    background: var(--card-bg);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow);
    padding: 20px;
    margin-bottom: 16px;
    border: 1px solid var(--border-light);
    transition: box-shadow 0.2s ease;
  }

  .card:hover {
    box-shadow: var(--shadow-lg);
  }

  .questionBox {
    background: linear-gradient(180deg, #f0f6ff, #ffffff);
    border: 1px solid rgba(37, 99, 235, 0.1);
  }

  .qHeader {
    display: flex;
    align-items: center;
    gap: 8px;
    font-weight: 700;
    color: var(--primary);
    margin-bottom: 12px;
  }

  .q-index {
    color: var(--accent);
    font-weight: 600;
    background-color: #ddf4ff;
    padding: 4px 10px;
    border-radius: 20px;
    font-size: 14px;
  }

  .qText {
    font-weight: 600;
    color: var(--text);
    margin-bottom: 16px;
    font-size: 16px;
    line-height: 1.6;
  }

  .options {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .options label {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    padding: 12px;
    border-radius: var(--radius);
    border: 1px solid var(--border);
    cursor: pointer;
    background: white;
    transition: all 0.2s ease;
  }

  .options label:hover {
    background: #f6f8fa;
    border-color: var(--accent);
  }

  .options input {
    transform: scale(1.1);
    margin-top: 2px;
  }

  .opt-correct {
    background: var(--success-light) !important;
    border-color: rgba(16, 185, 129, 0.3) !important;
  }

  .opt-incorrect {
    background: var(--danger-light) !important;
    border-color: rgba(220, 38, 38, 0.3) !important;
  }

  /* Buttons */
  .controls {
    display: flex;
    gap: 12px;
    margin: 24px 0;
    align-items: center;
  }

  .btn {
    background: var(--accent);
    color: white;
    padding: 12px 20px;
    border-radius: var(--radius);
    border: none;
    cursor: pointer;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 8px;
    transition: background-color 0.2s ease;
  }

  .btn:hover {
    background: var(--accent-hover);
  }

  .btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .btn-secondary {
    background: var(--text-lighter);
  }

  .btn-secondary:hover {
    background: var(--text-light);
  }

  .btn-success {
    background: var(--success);
  }

  .btn-success:hover {
    background: #1a7f37;
  }

  /* Results */
  #resultBox {
    display: flex;
    align-items: center;
    gap: 20px;
    padding: 20px;
    border-radius: var(--radius-lg);
    margin-top: 20px;
    border-left: 6px solid var(--success);
    background: var(--card-bg);
    box-shadow: var(--shadow);
  }

  .score {
    font-weight: 800;
    font-size: 28px;
    color: var(--success);
  }

  .score-details {
    display: flex;
    flex-direction: column;
    gap: 4px;
  }

  .small {
    font-size: 14px;
    color: var(--text-light);
  }

  .result-stats {
    display: flex;
    gap: 20px;
    margin-left: auto;
  }

  .stat-small {
    text-align: center;
  }

  .stat-small-value {
    font-size: 18px;
    font-weight: 700;
  }

  .stat-small-label {
    font-size: 12px;
    color: var(--text-light);
  }

  /* Feedback */
  .feedback {
    margin-top: 8px;
    font-size: 14px;
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .correct-tag {
    color: var(--success);
    font-weight: 700;
  }

  .incorrect-tag {
    color: var(--danger);
    font-weight: 700;
  }

  /* Footer */
  footer {
    margin-top: 40px;
    color: var(--text-light);
    font-size: 14px;
    text-align: center;
    padding: 20px 0;
    border-top: 1px solid var(--border-light);
  }

  #filePathDisplay {
    background: var(--border-light);
    padding: 4px 8px;
    border-radius: var(--radius);
    font-family: monospace;
  }

  /* Responsive */
  @media (max-width: 768px) {
    .header-content {
      flex-direction: column;
      gap: 12px;
      align-items: flex-start;
    }
    
    .exam-info {
      flex-direction: column;
      gap: 16px;
      align-items: flex-start;
    }
    
    .exam-stats {
      width: 100%;
      justify-content: space-between;
    }
    
    .controls {
      flex-direction: column;
      align-items: stretch;
    }
    
    #resultBox {
      flex-direction: column;
      gap: 16px;
      text-align: center;
    }
    
    .result-stats {
      margin-left: 0;
      justify-content: space-around;
      width: 100%;
    }
  }
</style>
</head>
<body>
  <header>
    <div class="container">
      <div class="header-content">
        <div class="logo">
          <i class="fab fa-github"></i>
          <h1>GitHub Exam — Premium Edition</h1>
        </div>
        <div class="header-meta">
          <div class="meta-item">
            <i class="far fa-clock"></i>
            <span>No Time Limit</span>
          </div>
          <div class="meta-item">
            <i class="far fa-question-circle"></i>
            <span>144 Questions</span>
          </div>
          <div class="meta-item">
            <i class="fas fa-trophy"></i>
            <span>70% to Pass</span>
          </div>
        </div>
      </div>
    </div>
  </header>

  <div class="container">
    <div class="exam-info">
      <div>
        <h2>GitHub Premium Certification</h2>
        <p>Test your knowledge of GitHub features, workflows, and best practices</p>
      </div>
      <div class="exam-stats">
        <div class="stat">
          <div class="stat-value">144</div>
          <div class="stat-label">Questions</div>
        </div>
        <div class="stat">
          <div class="stat-value">70%</div>
          <div class="stat-label">Passing Score</div>
        </div>
        <div class="stat">
          <div class="stat-value">∞</div>
          <div class="stat-label">Time Limit</div>
        </div>
      </div>
    </div>

    <div id="app">
      <div id="loading" class="card">
        <div style="display: flex; align-items: center; gap: 12px;">
          <i class="fas fa-spinner fa-spin"></i>
          <span>Loading questions...</span>
        </div>
      </div>
      <div id="exam" style="display:none;">
        <div id="questionsList"></div>

        <div class="controls">
          <button id="submitBtn" class="btn btn-success">
            <i class="fas fa-paper-plane"></i> Submit Exam
          </button>
          <button id="resetBtn" class="btn btn-secondary">
            <i class="fas fa-redo"></i> Reset Answers
          </button>
          <div id="resultArea" style="flex:1"></div>
        </div>
      </div>
    </div>

    <footer>
      File source: <code id="filePathDisplay"></code>
    </footer>
  </div>

<script>
/*
  The fileUrl should point to the uploaded text file.
  Your environment/tooling will convert the local path to a reachable URL when serving this HTML.
  Developer-specified path (do not change unless you uploaded a different file):
*/
const fileUrl = "question.txt"; // <-- exact uploaded file path (tooling will transform it)
document.getElementById('filePathDisplay').textContent = fileUrl;

/*
  Answer key mapping (converted from the previously used answer list).
  Each entry is an array of indices (0-based) representing correct option(s) for that question.
  Example: [1] => option B is correct. [0,2,3] => options A,C,D are correct.
  Make sure the array length matches the number of parsed questions.
*/
const answerKey = [
  [1], //1 B
  [2], //2 C
  [1], //3 B
  [1], //4 B
  [1], //5 B
  [1], //6 B
  [2], //7 C
  [2], //8 C
  [2], //9 C
  [1], //10 B

  [0], //11 A
  [1], //12 B
  [1], //13 B
  [2], //14 C
  [2], //15 C
  [0,2,3], //16 A,C,D
  [2], //17 C
  [1], //18 B
  [2], //19 C
  [1], //20 B

  [1], //21 B
  [1], //22 B
  [2], //23 C
  [0,2,3], //24 A,C,D
  [1], //25 B
  [1], //26 B
  [0], //27 A
  [2], //28 C
  [1], //29 B
  [2], //30 C

  [2], //31 C
  [2], //32 C
  [1], //33 B
  [3], //34 D
  [2], //35 C
  [1], //36 B
  [2], //37 C
  [0], //38 A
  [1], //39 B
  [2], //40 C

  [2], //41 C
  [0,1,2], //42 A,B,C
  [2], //43 C
  [1], //44 B
  [1], //45 B
  [2], //46 C
  [1], //47 B
  [1], //48 B
  [2], //49 C
  [2], //50 C

  [2], //51 C
  [2], //52 C
  [2], //53 C is incorrect → answer = C
  [2], //54 C
  [2], //55 C
  [3], //56 D
  [2], //57 C
  [2], //58 C
  [0], //59 A
  [2], //60 C

  [1], //61 B
  [1], //62 B
  [2], //63 C
  [2], //64 C
  [2], //65 C
  [0,1,3], //66 A,B,D
  [1], //67 B
  [1], //68 B
  [1], //69 B
  [1,3], //70 B,D

  [1,3], //71 B,D
  [2], //72 C
  [1], //73 B
  [2], //74 C
  [2], //75 C
  [1], //76 B
  [1,3], //77 B,D
  [2], //78 C
  [2], //79 C
  [2], //80 C

  [0], //81 A
  [2], //82 C
  [0,1,2], //83 A,B,C (default: PR merged, label added, item closed)
  [0,3], //84 A,D
  [2], //85 C
  [0], //86 A
  [2], //87 C
  [1], //88 B
  [1,3,5], //89 B,D,F
  [2], //90 C

  [0,2], //91 A,C
  [1], //92 B
  [0], //93 A
  [2], //94 C
  [1,3], //95 B,D
  [2], //96 C
  [1,2,3], //97 B,C,D
  [0,2], //98 A,C
  [2], //99 C
  [0], //100 A

  [1,2], //101 B,C
  [0,5], //102 A,F
  [1], //103 B
  [1,2], //104 B,C
  [1], //105 B
  [1], //106 B
  [1], //107 B
  [0], //108 A
  [0], //109 A
  [1], //110 B

  [0], //111 A
  [1], //112 B
  [0,1,3], //113 A,B,D
  [1], //114 B
  [0,1,4], //115 A,B,E
  [1,3], //116 B,E
  [0,3], //117 A,D
  [0], //118 A
  [1,2], //119 B,C
  [3], //120 D

  [1], //121 B
  [3], //122 D
  [1], //123 B
  [1], //124 B
  [0,5,6], //125 A,F,G
  [2], //126 C
  [0], //127 A
  [3], //128 D
  [2,3,5], //129 C,D,F
  [2,3], //130 C,D

  [1], //131 B
  [1,2], //132 B,C
  [0], //133 A
  [0,2], //134 A,C
  [1,4], //135 B,E
  [3], //136 D
  [0], //137 A
  [0], //138 A
  [3], //139 D
  [3], //140 D

  [1], //141 B
  [2], //142 C
  [1,4], //143 B,E
  [1,3,5] //144 B,D,F
];
// Note: answerKey length = 144 (matches 144 questions)

/* ======= Utility: parse uploaded text file into questions ======= */
async function loadAndParseFile(url) {
  try {
    const res = await fetch(url);
    if (!res.ok) throw new Error("Could not fetch the questions file (status " + res.status + ").");
    const text = await res.text();

    // Use regex to find each Question block: "Question <number>" followed by its block until next question or EOF
    const re = /Question\s*(\d+)\s*([\s\S]*?)(?=(?:Question\s*\d+\s)|$)/gi;
    const items = [];
    let m;
    while ((m = re.exec(text)) !== null) {
      const qnum = parseInt(m[1], 10);
      const block = m[2].trim();
      // split block into lines and remove empty lines
      const lines = block.split(/\r?\n/).map(s => s.trim()).filter(s => s.length>0);
      if (lines.length === 0) continue;
      const qText = lines[0];
      const opts = lines.slice(1); // all remaining lines are options (handles 4 or 5)
      items.push({ qnum, qText, opts });
    }
    return items;
  } catch (err) {
    console.error(err);
    throw err;
  }
}

/* ======= Render UI ======= */
function renderQuestions(items) {
  const list = document.getElementById("questionsList");
  list.innerHTML = "";

  items.forEach((item, idx) => {
    const card = document.createElement("div");
    card.className = "card questionBox";

    // header
    const header = document.createElement("div");
    header.innerHTML = `<div class="q-index">Q${item.qnum}</div>`;
    header.className = "qHeader";
    card.appendChild(header);

    const qtext = document.createElement("div");
    qtext.className = "qText";
    qtext.textContent = item.qText;
    card.appendChild(qtext);

    // options container
    const optsDiv = document.createElement("div");
    optsDiv.className = "options";
    optsDiv.id = `q${idx}-opts`;

    // determine input type: checkbox if answerKey has >1 correct or answerKey for that question includes indexes beyond 3 (handles variable option counts)
    const correct = (answerKey[idx] || []);
    const isMultiple = correct.length > 1;

    item.opts.forEach((optText, oi) => {
      const id = `q${idx}_opt${oi}`;
      const label = document.createElement("label");
      label.htmlFor = id;
      // create input
      const input = document.createElement("input");
      input.type = isMultiple ? "checkbox" : "radio";
      input.name = `q${idx}`;
      input.value = oi;
      input.id = id;
      label.appendChild(input);

      const span = document.createElement("span");
      span.innerHTML = `<strong>${String.fromCharCode(65+oi)}.</strong> ${optText}`;
      label.appendChild(span);

      optsDiv.appendChild(label);
    });

    card.appendChild(optsDiv);

    // placeholder for feedback
    const fb = document.createElement("div");
    fb.id = `q${idx}-feedback`;
    fb.className = "feedback";
    card.appendChild(fb);

    list.appendChild(card);
  });
}

/* ======= Evaluation & Highlighting ======= */
function evaluate(items) {
  let total = items.length;
  let score = 0;

  items.forEach((item, idx) => {
    const optsContainer = document.getElementById(`q${idx}-opts`);
    const labels = Array.from(optsContainer.querySelectorAll("label"));
    const inputs = Array.from(optsContainer.querySelectorAll("input"));
    const selected = inputs.map(i => i.checked ? parseInt(i.value,10) : null).filter(v => v !== null);
    const correct = answerKey[idx] || [];

    // Normalize comparison: sets equality
    const selSet = new Set(selected);
    const corrSet = new Set(correct);

    let isCorrect = (selSet.size === corrSet.size) && [...selSet].every(x => corrSet.has(x));
    if (isCorrect) score++;

    // Clear any previous classes
    labels.forEach(l => l.classList.remove("opt-correct","opt-incorrect"));

    // Highlight correct options and incorrect picks
    // Mark each label:
    labels.forEach((label, oi) => {
      const index = oi;
      const picked = inputs[oi].checked;
      const shouldBe = corrSet.has(index);

      if (shouldBe) {
        // correct answer — mark green
        label.classList.add("opt-correct");
      }
      if (picked && !shouldBe) {
        // user picked wrong — mark red
        label.classList.add("opt-incorrect");
      }
    });

    // feedback text
    const fb = document.getElementById(`q${idx}-feedback`);
    if (isCorrect) {
      fb.innerHTML = `<i class="fas fa-check-circle" style="color: var(--success);"></i> <span class="correct-tag">Correct</span>`;
    } else {
      // show which correct options were missed
      const missed = [...corrSet].filter(x => !selSet.has(x)).map(i => String.fromCharCode(65+i)).join(", ");
      const pickedWrong = [...selSet].filter(x => !corrSet.has(x)).map(i => String.fromCharCode(65+i)).join(", ");
      let parts = [];
      if (missed) parts.push(`Correct: ${missed}`);
      if (pickedWrong) parts.push(`You chose: ${pickedWrong}`);
      fb.innerHTML = `<i class="fas fa-times-circle" style="color: var(--danger);"></i> <span class="incorrect-tag">Incorrect</span> — ${parts.join(" • ")}`;
    }
  });

  // show result
  const resultArea = document.getElementById("resultArea");
  const percentage = Math.round((score/total)*100);
  const borderColor = score === total ? 'var(--success)' : (percentage >= 70 ? '#f59e0b' : 'var(--danger)');
  
  resultArea.innerHTML = `
    <div id="resultBox" class="card" style="border-left-color: ${borderColor}">
      <div class="score">${score} / ${total}</div>
      <div class="score-details">
        <div class="small">Score: ${percentage}%</div>
        <div class="small">${percentage >= 70 ? 'Passed' : 'Failed'} (70% required)</div>
      </div>
      <div class="result-stats">
        <div class="stat-small">
          <div class="stat-small-value">${score}</div>
          <div class="stat-small-label">Correct</div>
        </div>
        <div class="stat-small">
          <div class="stat-small-value">${total-score}</div>
          <div class="stat-small-label">Incorrect</div>
        </div>
      </div>
    </div>
  `;

  // scroll to results
  resultArea.scrollIntoView({behavior:'smooth'});
}

/* ======= Reset selections & styling ======= */
function resetExam(items) {
  items.forEach((_, idx) => {
    const optsContainer = document.getElementById(`q${idx}-opts`);
    if (!optsContainer) return;
    const labels = Array.from(optsContainer.querySelectorAll("label"));
    const inputs = Array.from(optsContainer.querySelectorAll("input"));
    inputs.forEach(i => i.checked = false);
    labels.forEach(l => { l.classList.remove("opt-correct","opt-incorrect"); });
    const fb = document.getElementById(`q${idx}-feedback`);
    if (fb) fb.innerHTML = "";
  });
  document.getElementById("resultArea").innerHTML = "";
  window.scrollTo({top:0, behavior:'smooth'});
}

/* ======= Wireup ======= */
(async function init() {
  const loading = document.getElementById("loading");
  try {
    const items = await loadAndParseFile(fileUrl);
    if (!items || items.length === 0) {
      loading.innerHTML = '<div style="display: flex; align-items: center; gap: 12px;"><i class="fas fa-exclamation-triangle" style="color: var(--danger);"></i><span>No questions found in the file.</span></div>';
      return;
    }
    // Hide loading, show exam
    loading.style.display = "none";
    document.getElementById("exam").style.display = "block";

    // Render
    renderQuestions(items);

    // Bind buttons
    document.getElementById("submitBtn").addEventListener("click", () => evaluate(items));
    document.getElementById("resetBtn").addEventListener("click", () => resetExam(items));
  } catch (err) {
    loading.innerHTML = `<div style="display: flex; align-items: center; gap: 12px;"><i class="fas fa-exclamation-triangle" style="color: var(--danger);"></i><span>Error loading questions: ${err.message || err}</span></div>`;
  }
})();
</script>
</body>
</html>

